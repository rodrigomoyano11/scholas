<app-modal-container [withPadding]="false">
  <div class="title__container">
    <span class="title mat-title">Editar proyecto</span>
  </div>

  <form class="project-data-form" (ngSubmit)="submitProjectData()" [formGroup]="editProjectForm">
    <mat-form-field class="project-data-form__field" appearance="outline">
      <mat-label>Nombre</mat-label>
      <input matInput placeholder="Ingresá el nombre del proyecto" formControlName="name" />
      <mat-error>{{ getErrors('name') }}</mat-error>
    </mat-form-field>

    <mat-form-field class="project-data-form__field" appearance="outline">
      <mat-label>Provincia</mat-label>
      <mat-select
        autocomplete="address-level1"
        formControlName="province"
        (selectionChange)="getLocalitiesByProvince($event.value)"
      >
        <mat-option *ngFor="let province of provinces" [value]="province">
          {{ province }}
        </mat-option>
      </mat-select>
      <mat-error>{{ getErrors('province') }}</mat-error>
    </mat-form-field>

    <mat-form-field class="project-data-form__field" appearance="outline">
      <mat-label>Localidad</mat-label>
      <mat-select autocomplete="address-level2" formControlName="locality">
        <mat-option *ngFor="let locality of localities" [value]="locality">
          {{ locality }}
        </mat-option>
      </mat-select>
      <mat-error>{{ getErrors('locality') }}</mat-error>
    </mat-form-field>

    <mat-form-field class="project-data-form__field" appearance="outline">
      <mat-label>Información</mat-label>
      <textarea
        class="text-area"
        rows="3"
        matInput
        placeholder="Ingresá la descripción del proyecto"
        formControlName="description"
      ></textarea>
      <mat-error>{{ getErrors('description') }}</mat-error>
    </mat-form-field>

    <mat-form-field class="project-data-form__field" appearance="outline">
      <mat-label>Monto objetivo</mat-label>
      <input
        matInput
        placeholder="Ingresá el monto de dinero objetivo a recaudar"
        formControlName="targetAmount"
      />
      <mat-hint>
        {{
          editProjectForm.controls['targetAmount'].value !== ''
            ? 'El monto objetivo es de ' +
              (editProjectForm.controls['targetAmount'].value | currency: 'ARS')
            : ''
        }}</mat-hint
      >
      <mat-error>{{ getErrors('targetAmount') }}</mat-error>
    </mat-form-field>

    <div class="img__container">
      <p class="img__heading">Foto de Portada</p>
      <p class="img__description">Imagen que aparece al principio del proyecto</p>
      <app-upload-image
        [initialImages]="coverPhotoData"
        [maxUploads]="1"
        (loaded)="setCoverPhoto($event)"
      ></app-upload-image>

      <p class="img__heading">Fotos</p>
      <p class="img__description">Imágenes aparecen en la galeria del proyecto</p>
      <app-upload-image
        [initialImages]="photosData"
        [maxUploads]="5"
        (loaded)="setPhotos($event)"
      ></app-upload-image>
    </div>

    <mat-form-field class="project-data-form__field" appearance="outline">
      <mat-label>Video</mat-label>
      <input matInput placeholder="Ingresá el link del video de YouTube" formControlName="video" />
      <mat-error>{{ getErrors('video') }}</mat-error>
    </mat-form-field>

    <div class="buttons-container">
      <button
        type="button"
        class="project-data-form__cancel"
        [color]="'primary'"
        [routerLink]="'/admin/projects'"
        mat-stroked-button
      >
        Cancelar
      </button>
      <button type="submit" class="project-data-form__submit" [color]="'primary'" mat-flat-button>
        Guardar cambios
      </button>
    </div>
  </form>
</app-modal-container>
